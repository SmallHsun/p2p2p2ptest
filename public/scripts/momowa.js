"object"!==typeof momowaCmds&&(momowaCmds=[]);
(function(){function n(){for(var d,g,k=0;k<arguments.length;k++)g=arguments[k],d=g.shift(),y[d].apply(y,g)}function d(d){return k.encodeURIComponent(d)}var g=document,B=navigator,Q=screen,k=window,C=k.performance||k.mozPerformance||k.msPerformance||k.webkitPerformance,y;y=new function(r,y){function n(a){a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");a=a.replace(/--/g,"");a=a.replace(/ or /g," o r ");a=a.replace(/ Or /g," O r ");a=a.replace(/ oR /g," o R ");return a=a.replace(/ OR /g," O R ")}function I(){return(B.language||
B.userLanguage).toLowerCase()}function R(){var a=/Mac OS X.*Safari\//.test(B.userAgent)?k.devicePixelRatio||1:1,c;c=Math.round(Q.width*a)+"x"+Math.round(Q.height*a);a=Math.round(100*a)/100;return c+","+a}function D(a){var c=g.createElement("a");c.href=a;a=c.pathname;0<a.length&&"/"!=a.charAt(0)&&(a="/"+a);return[c.hostname,a]}function u(a){var c="",b;if(document.cookie&&""!=document.cookie){b=g.cookie.split("; ");for(var e,d,t,f={},m=0;m<b.length;m++)e=b[m],d=e.indexOf("="),t=e.substring(0,d),e=e.substring(d+
1,e.length),f[t]=decodeURIComponent(e);b=f}else b=void 0;null!=b&&1=={}.hasOwnProperty.call(b,a)&&(c=b[a]);return c}function v(a,c,b,e,h,t){var f;b&&(f=new Date,f.setTime(f.getTime()+b));g.cookie=a+"="+d(c)+(b?"; expires="+f.toGMTString():"")+(e?"; path="+e:"/")+(h?"; domain="+h:"")+(t?"; secure":"")}function G(){var a=u("_mwa_uniVisitorInfo");""==a&&(a=u("_mwa_visitorInfo."+w));if(""!=a)a=a.split("."),a.unshift("0");else var a=E(),c=(new Date).getTime(),a=["1",a,c,0,0];return a}function S(a,c,b,
e){a=a+("."+c)+("."+b);a+="."+e;v("_mwa_uniVisitorInfo",a,63072E6,"/",p)}function F(){var a=u("_mwa_uniSessionInfo");""==a&&(a=u("_mwa_sessionInfo."+w));if(""!=a)a=a.split("."),a.unshift("0");else{var a=E(),c=(new Date).getTime(),a=["1",a,c,0,0];v("_mwa_adTrackInfo",";max-age=0",-1,"/",p)}return a}function J(a,c,b,e){a=a+("."+c)+("."+b);a+="."+e;v("_mwa_uniSessionInfo",a,18E5,"/",p)}function T(){var a=u("_mwa_uniCampaignInfo");if(""!=a)a=a.split("."),a.unshift("0");else var a=E(),c=(new Date).getTime(),
a=["1",a,c];return a}function U(a,c){v("_mwa_uniCampaignInfo",a+("."+c),15552E6,"/",p)}function K(){var a=u("_wau");return""!=a?a.split("."):["",0,0]}function Y(a,c){var b=V("adTrackInfo"),e=(new Date).getTime();if(""!=b){var h=!0,g=b[0].utmSource;b.forEach(function(d,m){var q=d.utmSource;q.match(a)&&q.length==a.length&&(d.adTrackId!=c||""==c||g!=q?(d.adTrackId=c,d.firstVisitTime=e,b.splice(m,1)):h=!1)});h&&b.unshift({utmSource:a,adTrackId:c,firstVisitTime:e})}else b.push({utmSource:a,adTrackId:c,
firstVisitTime:e});v("_mwa_adTrackInfo",d(JSON.stringify(b)),18E5,"/",p)}function V(a){var c=[];a=u("_mwa_"+a);return c=""!=a?JSON.parse(k.decodeURIComponent(a)):c}function E(){var a=(new Date).getTime()+"",c;c=0;c=Math.floor(Math.random()*(999999-c+1))+c+"";c=""+c;6>c.length&&(c+=Array(6-c.length+1).join("0"));return a+c}function z(a){var c,b;b=G();c=b[0];var e=b[1],h=b[2],t=b[3],f=b[4];b=F();var m=b[0],q=b[1],k=b[2],W=b[3];b=T();var r=b[0],n=b[1],Z=b[2];b=K();var y=b[0],z=b[1],A=b[2];b="";var x=
(new Date).getTime(),l,H;"1"==m&&(!f||18E5<x-f)&&(t++,f=x);W++;l=D(g.URL);H=d(l[0]);var E=H.indexOf(".");p=H.substring(E);S(e,h,t,f);J(q,k,W,x);"1"==r&&U(n,Z);b=b+("newVisitor="+c)+("&newVisit="+m)+("&visitorId="+e);b+="&visitId="+q;b+="&campaignId="+n;b+="&memberId="+d(y);b+="&age="+d(z);b+="&sex="+d(A);b+="&language="+d(I());b+="&devResolution="+d(R());b+="&userAgentInfo="+d(B.userAgent);0<g.referrer.length&&(l=D(g.referrer),b+="&refererDomain="+d(l[0]),b+="&refererPath="+d(l[1]),b+="&refererUrl="+
d(g.referrer));C&&C.timing&&C.timing.responseEnd&&C.timing.navigationStart&&(c=C.timing.responseEnd-C.timing.navigationStart,c=0>c?0:c,1E5>c&&(b+="&pageLoadTime="+c));b+="&pageTitle="+d(L);b+="&pageDomain="+d(H);b+="&pagePath="+d(l[1]);b+="&pageUrl="+d(g.URL);(c=g.characterSet||g.charset)&&(b+="&charSet="+d(c));c=b;"undefined"!==typeof B.cookieEnabled?e=B.cookieEnabled?"1":"0":(e="_mwa_testcookie."+w,v(e,"1"),e="1"===u(e)?"1":"0");b=c+("&hasCookie="+e);w&&(b+="&siteId="+w);b+="&sysCookieDomain="+
p;M&&(b+="&recommendId="+M);N&&(b+="&goodsDefaultCategory="+N);(c=u("__utmz"))&&(b+="&utmz="+d(c));c=b;0<a.length&&(c+="&"+a);O(c)}function X(a,c){var b="",e=G()[1],h=F()[1],b=b+("siteId="+w||""),b=b+("&sessionId="+h)+("&visitorId="+e)+("&trackType="+a),b=b+("&dataInfo="+d(c));O(b)}function O(a){var c=new Image(1,1),b=P,b=b+(0>P.indexOf("?")?"?":"&");c.onload=function(){};c.src=b+a}function aa(a){fetch("//https://momowa.momoshop.com.tw/momowa/rc/WEBRC_EVENT.MMW",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),
body:JSON.stringify(a)}).then(function(a){return console.log("web rc status:"+a.status)})["catch"](function(a){console.error(a)})}var w=y||"",P=r||"",L=n(g.title),p="",M="",N="";return{setSiteId:function(a){w=a},setTrackerUrl:function(a){P=a},setDocumentTitle:function(a){L=n(a)},updateSessionTime:function(){var a=F(),c=a[0];v("__utmz","",18E5,"/",p);if("0"==c){var c=a[1],b=a[2],a=a[3],e;e=(new Date).getTime();var h=D(g.URL),h=d(h[0]),t=h.indexOf(".");p=h.substring(t);J(c,b,a,e)}v("_mwa_adTrackInfo",
";max-age=0",-1,"/",p)},trackPageView:function(){z("")},trackAction:function(a,c,b,e,h){b=b||"";e=e||"";a="actCategory="+d(a);a+="&actName="+d(c);a+=b.length?"&actLabel="+d(b):"";a+=e.length?"&actValue="+d(e):"";a+=null==h?"":"&blockImpId="+d(h);z(a)},trackGoal:function(a,c){var b;b="goalName="+d(a);b+="&goalValue="+d(c);z(b)},trackSiteSearch:function(a,c,b,e,h,g,f,m,q){a="searchKeyword="+d(a);a+="&searchCategory="+d(c);a+="&searchPageNum="+d(b);a+=e.length?"&searchStoreCode="+d(e):"";a+="-"!=h?"&searchPrice="+
d(h):"";a+="&searchCondition="+d(g);a+=null==f?"":"&searchBrand="+d(f);a=a+(null==m?"":"&searchCount="+m)+(null==q?"":"&searchIndex="+d(q));z(a)},trackCategoryIndex:function(a,c,b){a="&category="+d(a);a+=null==c?"":"&categoryBrand="+d(c);a+=null==b?"":"&categoryIndex="+d(b);z(a)},setRecommendId:function(a){M=a},setDefaultCategory:function(a){N=a},trackTransaction:function(a){X("trackTransaction",a)},trackShoppingCart:function(a){X("trackShoppingCart",a)},trackBlockItemAction:function(a,c,b){var e=
"",h=G()[1],t=F()[1],f=K(),m=f[0],q=f[1],f=f[2],k,p;k=D(g.URL);p=d(k[0]);e+="siteId="+w||"";e=e+("&visitorId="+h)+("&sessionId="+t)+("&visitId="+t);e+="&memberId="+d(m);e+="&pageTitle="+d(L);e+="&pageDomain="+d(p);e+="&pagePath="+d(k[1]);e+="&pageUrl="+d(g.URL);e+="&language="+d(I());e+="&age="+d(q);e+="&sex="+d(f);e+="&actName="+d(a);e+="&blockImpId="+d(c);e+="&itemList="+d(b);O(e)},trackEvent:function(a,c){var b=G(),e=b[1],h=b[2],k=b[3],b=b[4],f=F(),m=f[0],q=f[1],u=f[2],f=f[3],n=T(),v=n[0],w=n[1],
n=n[2],r=K(),y=r[0],z=r[1],r=r[2],A;A=D(g.URL);A=d(A[0]);var x=A.indexOf(".");p=A.substring(x);A=navigator.doNotTrack?navigator.doNotTrack:"";var l=new URL(g.URL);if(x=l.searchParams.get("utm_source"))l=l.searchParams.get("asi"),Y(x,"appier"==x&&l?l:"");x=V("adTrackInfo");l=(new Date).getTime();"1"==m&&(!b||18E5<l-b)&&(k++,b=l);f++;S(e,h,k,b);J(q,u,f,l);"1"==v&&U(w,n);e={userInfo:{sessionId:q,visitorId:e,memberId:y,age:z,sex:r,ip:"",userAgent:B.userAgent,deviceId:"",deviceAdId:"",appVendorId:"",devName:"",
devResolution:R(),osName:"",osVersion:"",appVersion:"",browserName:"",browserVersion:"",language:I(),adTrackList:x,isEnableTrack:A},eventInfo:a,eventAttrs:c};aa(e)}}};for(var r=0;r<momowaCmds.length;r++)momowaCmds[r]&&n(momowaCmds[r]);momowaCmds=new function(){return{push:n}}})();window&&window.momowaReady&&window.momowaReady();
